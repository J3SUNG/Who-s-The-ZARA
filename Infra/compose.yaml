services:
    frontend:
        build:
            context: ../FE
            dockerfile: Dockerfile
        container_name: react
        ports:
            - "3000:3000"

    backend:
        build:
            context: ../BE
            dockerfile: Dockerfile
        container_name: spring
        ports:
            - "8080:8080"
        depends_on:
          redis:
            condition: service_healthy

    redis:
        image: redis:latest
        container_name: redis
        hostname: redis
        command: redis-server --requirepass "chibbol2023"
        ports:
            - "6380:6380"
        healthcheck:
            test: ["CMD", "redis-cli", "ping"]
            interval: 10s
            timeout: 5s
            retries: 5
